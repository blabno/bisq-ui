<app-section-header class="d-none d-lg-block"></app-section-header>
<div class="row">
  <div class="col-4">
    <button ion-button color="light" routerLink="./create">{{ 'OFFERS.CREATE_BUTTON' | translate}}</button>
  </div>
  <div class="col-4">
    <ion-item class="filter-item">
      <ion-label floating>{{'OFFERS.LIST.FILTER.BY_CURRENCY' | translate}}</ion-label>
      <ion-select [(ngModel)]="currencyFilter" (ionChange)="onCurrencyFilterChange($event)" interface="popover">
        <ion-option [value]="NO_FILTER">{{('OFFERS.LIST.SHOW_ALL' | translate)}}</ion-option>
        <ion-option *ngFor="let currency of currencies" [value]="currency.value">{{currency.name}}</ion-option>
      </ion-select>
    </ion-item>
  </div>
  <div class="col-4">
    <ion-item class="filter-item">
      <ion-label floating>{{'OFFERS.LIST.FILTER.BY_METHOD' | translate}}</ion-label>
      <ion-select [(ngModel)]="methodFilter" interface="popover">
        <ion-option [value]="NO_FILTER">{{'OFFERS.LIST.SHOW_ALL' | translate}}</ion-option>
      </ion-select>
    </ion-item>
  </div>
</div>
<div>{{'OFFERS.LIST.NO_OFFERS' | translate}}: {{list.length || 0}}</div>
<div *ngIf="loading" class="d-flex justify-content-center align-items-center m-4 loading">
  <h1>{{'SHARED.LOADING' | translate}}..</h1>
  <ion-spinner></ion-spinner>
</div>
<div *ngIf="!list.length && !loading" class="card no-results-card">
  <div class="card-body">
    <span>{{'OFFERS.LIST.NO_RESULTS' | translate}}</span>
  </div>
</div>
<div *ngIf="list.length" class="row">
  <div class="col-md-6 col-lg-4" *ngFor="let item of list">
    <div class="card">
      <div class="card-header">
        <span title="Onion adress: {{item.ownerNodeAddress}}">
          <app-gravatar [hashSeed]="item.ownerNodeAddress" size="24"></app-gravatar>
        </span>
        {{item.market}}
        <span class="float-right">{{item.method}}
          <i class="fas fa-info-circle info"></i>
        </span>
      </div>
      <div class="card-body">
        <div>BTC (min-max)
          <span class="float-right">{{getOfferBTCAmount(item)}}</span>
        </div>
        <div>{{'OFFERS.LIST.PRICE' | translate}}
          <span class="float-right">{{item.price / 10000}} ({{item.marketPriceMargin}}%)</span>
        </div>
        <div>{{'OFFERS.LIST.AMOUNT' | translate}}
          <span class="float-right">{{getOfferAmount(item)}}</span>
        </div>
      </div>
      <div (click)="takeOffer(item)" class="btn rounded-0" [ngClass]="{
            'btn-primary': 'buy' === type,
            'btn-warning': 'sell' === type,
            'disabled': !checkIfValidPaymentAccount(item.paymentMethodId)
            }">
        <span *ngIf="'buy' === type" class="select-button">
          <i class="fas fa-download menu-icon"></i>{{'OFFERS.LIST.BUY' | translate}}</span>
        <span *ngIf="'sell' === type" class="select-button">
          <i class="fas fa-upload menu-icon"></i>{{'OFFERS.LIST.SELL' | translate}}</span>
      </div>
    </div>
  </div>
</div>
